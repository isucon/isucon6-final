{{define "content"}}

<div class="row">
  {{range $item := .Messages}}
    <p class="alert alert-{{$item.Kind}}">{{if $item.MessageHTML}}{{$item.MessageHTML}}{{else}}{{$item.Message}}{{end}}</p>
  {{end}}
</div>

{{if .Team}}
<div class="row">
  <h2>ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã‚­ãƒ¥ãƒ¼</h2>
  <p>
  {{range .Jobs}}
  <span class="label {{if (eq .Status "running")}}label-success{{else}}label-default{{end}}">{{.TeamID}}{{if (eq $.Team.ID .TeamID)}}*{{end}}</span>
  {{end}}
  </p>
  <form action="/queue" method="POST">
    {{if .Team.IPAddr}}
      <div class="form-group">
        <input class="btn btn-primary" type="submit" value="Enqueue">
      </div>
    {{else}}
      <p class="alert alert-warning">ãƒšãƒ¼ã‚¸ä¸‹éƒ¨ã®ã€Œé‹å–¶å‘ã‘æƒ…å ±ã€ã‹ã‚‰IPã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’ç™»éŒ²ã—ã¦ãã ã•ã„ã€‚</p>
      <div class="form-group">
        <input class="btn btn-primary" type="submit" value="Enqueue" disabled>
      </div>
    {{end}}
  </form>
</div>
{{end}}

{{if .LatestResult.Output}}
<div class="row">
  <h2>è‡ªãƒãƒ¼ãƒ ã®æœ€æ–°çµæœ</h2>
  <table class="table">
    <tr>
      <th>Status</th><td>{{if .LatestResult.Output.Pass}}PASS{{else}}FAIL{{end}}</td>
    </tr>
    <tr>
      <th>Score</th><td>{{.LatestResult.Output.Score}}</td>
    </tr>
    <tr>
      <th>Best</th><td>{{if .LatestResult.Score}}{{.LatestResult.Score.Best}}{{else}}-{{end}}</td>
    </tr>
    <tr>
      <th>Messages</th>
      <td>
        <ul>
          {{range .LatestResult.Output.Messages}}
          <li>{{.}}</li>
          {{end}}
        </ul>
      </td>
    </tr>
    <tr>
      <th>Time</th>
      <td>{{.LatestResult.At}}</td>
    </tr>
  </table>
</div>
{{end}}

<div class="row">
  <h2>ãƒªãƒ¼ãƒ€ãƒ¼ãƒœãƒ¼ãƒ‰</h2>

  <div id="plot" style="height: 300px;"></div>
  <script>
    Highcharts.setOptions({useUTC: false});
    new Chartkick.LineChart("plot", {{.PlotData}}, {min: 0});
  </script>

  <table class="table table-striped">
    <thead>
      <tr>
        <th>Rank</th>
        <th>Team</th>
        <th>Score</th>
        <th>Time</th>
      </tr>
    </thead>
    <tbody>
      {{range $index, $score := .Ranking}}
        {{if (ne $score.Team.ID 9999) }}
          <tr {{if $.Team}}{{if (eq $score.Team.ID $.Team.ID)}}class="warning"{{end}}{{end}}>
            <td>{{plusOne $index}}</td>
            <td>{{if (eq "ğŸ‘¼" $score.Team.Name)}}<img src="//cdn.jsdelivr.net/emojione/assets/png/1f607.png?v=2.2.6" style="width:1.5em;height:1.5em;" alt=":innocent:">{{else}}{{$score.Team.Name}}{{end}}</td>
            <td>{{$score.Latest}}</td>
            <td>{{$score.At}}</td>
          </tr>
        {{end}}
      {{end}}
    </tbody>
  </table>
</div>

<div class="row">
  <h2>é‹å–¶å‘ã‘æƒ…å ±</h2>
  <form action="/team" method="POST">
    <div class="form-group">
      <label>ã‚°ãƒ­ãƒ¼ãƒãƒ«IPv4ã‚¢ãƒ‰ãƒ¬ã‚¹</label>
      <input class="form-control" type="text" name="ip_address" value="{{.Team.IPAddr}}" autocomplete="off">
    </div>
    <div class="form-group">
      <label>ç«¶æŠ€ã«ä½¿ç”¨ã—ãŸã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åï¼ˆã‚¹ãƒšãƒ¼ã‚¹åŒºåˆ‡ã‚Šã§4å€‹ã¾ã§ï¼‰</label>
      <input class="form-control" type="text" name="instance_name" value="{{.Team.InstanceName}}" autocomplete="off">
    </div>
    <div class="form-group">
      <input class="btn btn-primary" type="submit" value="æ›´æ–°">
    </div>
  </form>
</div>

{{end}}
